; Warpspeed.io
; PHP-FPM pool config file.
;

[{{domain}}]

; Set the user/group for pool processes.
user = www-data
group = www-data

; Set a pool specific unix socket for handling connections.
listen = /var/run/php5-fpm-{{domain}}.sock
listen.owner = www-data
listen.group = www-data
listen.mode = 0666

; Set defaults for process management.
pm = dynamic
pm.max_children = 5
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 3
pm.max_requests = 1024

; CHROOT to lock down php directory access.
chroot = /home/{{user}}/sites/{{domain}}

; CD to this directory.
chdir = /

; Set timeouts and pool specific slow log (does not use chroot).
request_terminate_timeout = 120s
request_slowlog_timeout = 10s
slowlog = /home/{{user}}/sites/{{domain}}/php-slowlog.log

; Set a pool specific error log.
php_admin_flag[log_errors] = on
php_admin_value[error_log] = /tmp/php-error.log

; Set a pool specific location for sessions.
php_admin_value[session.save_path] = /tmp/session

; Set a pool specific location for file uploads.
php_admin_value[upload_tmp_dir] = /tmp/upload

; Optionally, adjust memory limit (default 128M).
;php_admin_value[memory_limit] = 32M

; Set environment variables.
env[HOSTNAME] = $HOSTNAME
env[TMP] = /tmp
env[TMPDIR] = /tmp
env[TEMP] = /tmp
